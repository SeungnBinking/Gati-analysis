import numpy as np
import math
from scipy.signal import argrelextrema
import matplotlib.pyplot as plt
from detecta import detect_peaks

ankle_distance = [0.1271, 0.1022, 0.1063, 0.1399, 0.1669, 0.1906, 0.1987, 0.1992, 0.1798, 0.1544, 0.1395, 0.1796, 0.2404, 0.2898, 0.3034, 0.308, 0.3104, 0.2915, 0.2515, 0.1673, 0.0881, 0.0732, 0.1299, 0.1919, 0.2405, 0.2663, 0.2855, 0.2802, 0.2414, 0.17, 0.1376, 0.1839, 0.2613, 0.303, 0.3268, 0.3371, 0.3381, 0.3144, 0.2682, 0.1772, 0.0993, 0.0753, 0.123, 0.2082, 0.2574, 0.2918, 0.3196, 0.3318, 0.3159, 0.2565, 0.2013, 0.151, 0.133, 0.1549, 0.2333, 0.2877, 0.3195, 0.328, 0.3056, 0.2191, 0.1252, 0.0744, 0.1485, 0.2404, 0.3319, 0.3679, 0.3836, 0.3731, 0.3372, 0.2476, 0.1676, 0.1206, 0.1676, 0.2356, 0.2868, 0.314, 0.3034, 0.2534, 0.1784, 0.0975, 0.1169, 0.223, 0.2888, 0.3325, 0.358, 0.3644, 0.3371, 0.2778, 0.2157, 0.1704, 0.1487, 0.1365, 0.1271]

a = detect_peaks(ankle_distance)

a = a.tolist()
print(a)
right_angle = [61.26, 39.4, 29.38, 15.44, 1.54, 3.72, 4.7, 0.48, 4.16, 4.37, 1.57, 0.22, 0.91, 2.53, 5.98, 7.87, 8.33, 15.16, 27.2, 43.14, 53.48, 54.94, 47.15, 33.98, 16.17, 0.53, 4.98, 5.94, 4.37, 0.72, 3.86, 6.25, 7.02, 7.05, 7.08, 8.05, 10.05, 16.54, 29.11, 45.86, 55.13, 56.57, 50.07, 38.9, 23.99, 6.06, 1.97, 3.82, 1.41, 4.84, 12.62, 25.94, 29.65, 26.29, 18.29, 13.18, 12.85, 17.68, 33.79, 50.15, 63.52, 69.56, 66.07, 47.53, 25.68, 7.21, 3.29, 4.82, 2.95, 14.53, 23.64, 25.42, 23.03, 20.66, 20.33, 26.93, 37.29, 50.69, 66.84, 71.53, 69.35, 58.91, 35.89, 17.69, 5.62, 1.63, 5.14, 13.02, 23.25, 30.17, 35.19, 38.91]


step = [right_angle[a[i]:a[i+1]] for i in range(len(a)-1)]

print(step)
